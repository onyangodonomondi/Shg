{% extends 'base.html' %}

{% block title %}Family Lineage{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center">Family Lineage Hierarchy</h1>

    <div class="family-tree">
        <ul>
            {% for parent, descendants in families.items %}
                <li>
                    <div class="profile-card">
                        <img src="{{ parent.image.url }}" alt="{{ parent.user.first_name }}" class="img-fluid rounded-circle mb-2" style="width: 100px; height: 100px;">
                        <h4>{{ parent.user.first_name }} {{ parent.user.last_name }}</h4>
                        <p><strong>Father:</strong> {% if parent.father %}{{ parent.father.user.first_name }} {{ parent.father.user.last_name }}{% else %}Unknown{% endif %}</p>
                        <p><strong>Mother:</strong> {% if parent.mother %}{{ parent.mother.user.first_name }} {{ parent.mother.user.last_name }}{% else %}Unknown{% endif %}</p>
                    </div>

                    <!-- Include the recursive part -->
                    {% if descendants %}
                        <ul>
                            {% include 'members/lineage_tree.html' with families=descendants %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
